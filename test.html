
<!DOCTYPE html>
<html lang="en">
<head>
    <title>test</title>
    <meta charset="utf-8">
    <style>

    </style>
</head>
<body>

<input type="file" id="inputModel">

<script src="js/three.js"></script>
<script src="js/ColladaLoader.js"></script>

<script>

    var camera, scene, renderer;
    var controls = [];

    init();
    render();

    var fileInput = document.getElementById('inputModel');

    fileInput.addEventListener( 'change', function ( event ) {
        loadModel( fileInput.files[ 0 ] );
    } );

    function loadModel(file) {
        var filename = file.name;
        var extension = filename.split( '.' ).pop().toLowerCase();

        var reader = new FileReader();

        if (extension == 'dae') {
            reader.addEventListener( 'load', function ( event ) {

                var contents = event.target.result;

                var loader = new THREE.ColladaLoader();
                var collada = loader.parse( contents );

                collada.scene.name = filename;

                scene.add(collada.scene);
                console.log('load done');

            }, false );
            reader.readAsText( file );
        }

        else {
            alert ('only collada can be accepted');
        }

    }

    function init() {

        renderer = new THREE.WebGLRenderer();
        renderer.sortObjects = false;
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );

        //

        camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 3000 );
        camera.position.set( 10, 5, 10);
        camera.lookAt( new THREE.Vector3( 0, 0, 0 ) );

        scene = new THREE.Scene();

        var light = new THREE.PointLight(0xffffff);
        light.position.set(1,1,-1);
        scene.add(light);

        var planeGeo = new THREE.PlaneGeometry(10,10);
        var material = new THREE.MeshLambertMaterial({color:0xffffff});
        var plane =new THREE.Mesh(planeGeo, material);
        scene.add(plane);


        window.addEventListener( 'resize', onWindowResize, false );

    }



    function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

        render();

    }

    function render() {

        for ( var i = 0, j = controls.length; i < j; i ++ ) {

            controls[ i ].update();

        }

        renderer.render( scene, camera );

    }

</script>

</body>
</html>
